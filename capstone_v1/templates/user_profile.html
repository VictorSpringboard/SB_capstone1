{% extends 'base.html' %}


    {% block title %}
        <title>User Profile Page</title>
    {% endblock %}
    
    {% block body %}




    {% if g.user.id == user.id%}


    <img src="{{user.img}}" alt="" width="300">
    <p>Username: {{user.username}}</p>
    <p>Email: {{user.email}}</p>
    <p>About: {{user.bio}}</p>
    




    
    <h2>Your favorite recipes</h2>
    
    <ol>
        {% for fav in favorites %}
        <li><a href="/recipe_details/{{fav.recipe_id}}">{{fav.title}}</a></li>
        {% endfor %}
    </ol>
    
    
    <h2>These are your matches.</h2>
    {% for match in user.matches %}
    
    
    {% if g.user in match.matches %}
    <div class="card" style="width: 18rem;">
            <img class="card-img-top" src="{{match.img}}" alt="Card image cap">
            <div class="card-body">
              <h5 class="card-title"><a href="/users/{{match.id}}/profile">{{match.username}}</a></h5>
              <p class="card-text">Bio: {{match.bio}}</p>
              <a href="#" class="btn btn-primary">Send a message!</a>
            </div>
          </div>
          
          {% else %}
          <div class="card" style="width: 18rem;">
            <img class="card-img-top" src=".../100px180/" alt="Sorry. This user hasn't added you as a match yet, so you can't see their profile picture.">
            <div class="card-body">
              <h5 class="card-title"><a href="/users/{{match.id}}/profile">{{match.username}}</a></h5>
              <p class="card-text">Bio: {{match.bio}}</p>
              <p>Sorry. Only users who like each other can send messages and see each other's profile pictures</p>
            </div>
          </div>
          
          
          
          
          
          
          {% endif %}
          {% endfor %}
    
    
    
    {% else %}
    

    {% if g.user.id in their_matches %}
          <img src="{{user.img}}" alt="" width="300">
    {% else %}
          <p>Sorry. You are not in this user's matches</p>
          <form action="/users/{{g.user.id}}/add_to_matches/{{user.id}}">
              <button>Add this user to my matches!</button>
          </form>
    {% endif %}

    <p>Username: {{user.username}}</p>
    <p>Email: {{user.email}}</p>
    <p>About: {{user.bio}}</p>
    
    
    <h2>These are {{user.username}}'s favorite recipes</h2>
    
    <ol>
        {% for fav in favorites %}
        <li><a href="/recipe_details/{{fav.recipe_id}}">{{fav.title}}</a></li>
        {% endfor %}
    </ol>
    
    
    {% endif %}
    
    
    
    
    
    
    
    {% endblock body %}
    